@using GameReview2.Helpers
@model PagedList.IPagedList<GameReview2.Models.Game>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Games</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<div class="row">
    <div class="col-md-3">
        @using (Ajax.BeginForm("Index", "Games", new AjaxOptions()
        {
            HttpMethod = "GET",
            InsertionMode = InsertionMode.Replace,
            UpdateTargetId = "grid"
        }))
        {
        <div class="input-group-addon">
            <input class="form-control"
                   placeholder="Game Title" name="searchString"
                   type="text" value="@ViewBag.CurrentFilter" />
            <div class="input-group-addon">
                <button class="btn btn-default" type="submit">Search</button>
            </div>

        </div>
    }
    </div>
</div>
@*<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Photo)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Title)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.GameInfo)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Summary)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.CriticScoreAvg)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.UserScoreAvg)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.CriticReviewCount)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.UserReviewCount)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
<tr>
    <td>
        @if (item.Photo != null)
        {
            @Html.GetThumbnail(item.Photo, 130, 180)
        }
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Title)
    </td>
    <td>
        <b>@Html.DisplayNameFor(model => model.GameInfo.Rating)</b>
        @Html.DisplayFor(modelItem => item.GameInfo.Rating)
        <br />
        <b>@Html.DisplayNameFor(model => model.GameInfo.Genre)</b>
        @Html.DisplayFor(modelItem => item.GameInfo.Genre)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Summary)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.CriticScoreAvg)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.UserScoreAvg)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.CriticReviewCount)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.UserReviewCount)
    </td>
    <td>
        @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
        @Html.ActionLink("Details", "Details", new { id = item.Id }) |
        @Html.ActionLink("Delete", "Delete", new { id = item.Id })
    </td>
</tr>
    }

</table>*@

<div id="grid">
    @Html.Partial("_GameList", Model)
</div>
